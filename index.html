<!DOCTYPE html>
<html style="width:100%;height:100%;">
  <body style="width:100%;height:100%;margin:0;">
    <button class="btn" id="-1d">-1d</button>
    <button class="btn" id="-3d">-3d</button>
    <button class="btn" id="-1w">-1w</button>
    <button class="btn" id="-1m">-1m</button>
    <button class="btn" id="-1y">-1y</button>
    <button class="btn" id="all">all</button>
    <script src="./config.js"></script>
    <script src="./funcs.js"></script>
    <script src="https://sdk.amazonaws.com/js/aws-sdk-2.2.26.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/simple-statistics/1.0.0/simple_statistics.min.js"></script>
    <!-- http://d3js.org/d3.v3.min.js is sometimes not available via HTTPS and
         GitHub sets the X-Content-Type-Options: nosniff header. So, I have to use some strange rawgit mirror :-( -->
    <script src="https://cdn.rawgit.com/mbostock/d3/v3.5.14/d3.min.js"></script>
    <!-- http://dimplejs.org/dist/dimple.v2.1.6.min.js is not available via HTTPS and
         GitHub sets the X-Content-Type-Options: nosniff header. So, I have to use some strange rawgit mirror :-( -->
    <script src="https://cdn.rawgit.com/PMSI-AlignAlytics/dimple/master/dist/dimple.v2.1.6.min.js"></script>

    <script>
      var oneDayInSeconds = 24 * 60 * 60;
      funcs.fetchDataFromDynamoDB(oneDayInSeconds, funcs.drawChart);

      d3.selectAll(".btn").on("click", function() {
        var backInTimeSeconds = funcs.calculateBackinTimeSeconds(d3.event.target.id);
        d3.select("svg").remove();
        funcs.fetchDataFromDynamoDB(backInTimeSeconds, funcs.drawChart);
      });
    </script>
  </body>
</html>
